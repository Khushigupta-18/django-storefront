{% extends 'store/base.html' %}

{% block title %}Your Cart{% endblock %}

{% block content %}
<h1>Your Cart</h1>

{% if items %}
    <table border="1" cellpadding="8">
        <tr>
            <th>Product</th>
            <th>Price</th>
            <th>Qty</th>
            <th>Total</th>
            <th>Remove Item</th>
        </tr>

        {% for item in items %}
        <tr>
            <td>{{ item.product.title }}</td>
            <td>₹{{ item.product.unit_price }}</td>
            <td>{{ item.quantity }}</td>
            <td>₹{{ item.quantity|floatformat:0|add:0 }}</td>
            <td> 
                 <a href="{% url 'store:remove_from_cart' item.id %}">Remove</a>
            </td>
            <td>
                <a href="{% url 'store:update_cart_item' item.id 'decrease' %}">−</a>
                {{ item.quantity }}
                <a href="{% url 'store:update_cart_item' item.id 'increase' %}">+</a>
            </td>
        </tr>

{% endfor %}
    </table>

    <h3>Grand Total: ₹{{ total }}</h3>
{% else %}
    <p>Your cart is empty.</p>
{% endif %}

<a href="{% url 'store:product_list' %}">← Continue shopping</a>
{% endblock %}

{% if user.is_authenticated %}
    <a href="{% url 'store:checkout' %}">Proceed to Checkout</a>
{% else %}
    <a href="{% url 'login' %}?next={% url 'store:checkout' %}">
        Login to Checkout
    </a>
{% endif %}
